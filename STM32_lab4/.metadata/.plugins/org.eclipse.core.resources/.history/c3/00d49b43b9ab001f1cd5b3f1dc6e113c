/*
 * fsm_setting.c
 *
 *  Created on: Nov 11, 2024
 *      Author: NGUYEN GIAP
 */

#include "fsm_setting.h"
#include "global.h"


void fsm_setting(){
	switch(status){
	case NORMAL:
		if(isButtonPressed(0) == 1){
			status = SET_RED;
		}
		if(isButtonPressed(1)); //do nothing
		if(isButtonPressed(2) == 1){
			status = INIT;

			redTime = redTimeInit;
			yellowTime = yellowTimeInit;
			greenTime = greenTimeInit;
		}
		break;
	case SET_RED:
		if(isButtonPressed(0) == 1){
			status = SET_YELLOW;
		}
		if(isButtonPressed(1) == 1){
			redTime++;
			while (redTime < 1) redTime += 99;
			while (redTime > 99) redTime -= 99;
		}
		if(isButtonPressed(2) == 1){
			status = INIT;
		}

		break;
	case SET_YELLOW:
		if(isButtonPressed(0) == 1){
			status = SET_GREEN;
		}
		if(isButtonPressed(1) == 1){
			yellowTime++;
			while (yellowTime < 1) yellowTime += 99;
			while (yellowTime > 99) yellowTime -= 99;
		}
		if(isButtonPressed(2) == 1){
			status = INIT;
		}
		break;
	case SET_GREEN:
		if(isButtonPressed(0) == 1){
			status = SET_NORMAL;
		}
		if(isButtonPressed(1) == 1){
			greenTime++;
			while (greenTime < 1) greenTime += 99;
			while (greenTime > 99) greenTime -= 99;
		}
		if(isButtonPressed(2) == 1){
			status = INIT;
		}
		break;
	default:
		break;
	}
}
